<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    .card {
            /* Add shadows to create the "card" effect */
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
            transition: 0.3s;
        }

        /* On mouse-over, add a deeper shadow */
        .card:hover {
            box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
        }

        .card img {
            max-width: 100%;
            height: auto;
            display: block;
        }

        /* Add some padding inside the card container */
        .container {
            padding: 2px 16px;
            display: flex;
            flex-wrap: wrap;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
</style>
<body>
    <script>
        const dropdown = document.createElement("div")
        const residentes = document.createElement("div")

        fetch(`https://rickandmortyapi.com/api/location`)
        .then((res) => res.json())
        .then((data) => { 
            
            console.log(data.results)
            const listaPlanetas = document.createElement("select")
            
            data.results.forEach(planeta => {
            const opcion = document.createElement("option")
            opcion.textContent = planeta.name
            listaPlanetas.appendChild(opcion)
        });
        dropdown.appendChild(listaPlanetas)

        // 2 Parte del Ejercicio
        // listaPlanetas.addEventListener("change", () => {
        //     alert(`Has elegido la opciÃ³n: ${listaPlanetas.value}`)
        // })

        listaPlanetas.addEventListener("change", () => {

            residentes.innerHTML = "";
            listaPlanetas.value
            const planetaSeleccionado = data.results.find(planeta => planeta.name === listaPlanetas.value)
            console.log(planetaSeleccionado)
            planetaSeleccionado.residents.forEach(url => {
                fetch(url)
                .then((res) => res.json())
                .then(personaje => {
                    const contenedorPersonajes = document.createElement("div")
                    const imagen = document.createElement("img")
                    imagen.src = personaje.image
                    const nombre = document.createElement("p")
                    nombre.textContent = personaje.name
                    contenedorPersonajes.appendChild(imagen)
                    contenedorPersonajes.appendChild(nombre)
                    residentes.appendChild(contenedorPersonajes)
                    residentes.classList.add("container")
                    residentes.classList.add("card")
                })
            })
        })

    })

    document.body.appendChild(dropdown)
    document.body.appendChild(residentes)

    

        
    </script>
</body>
</html>